
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/d3/2.10.0/d3.v2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/dat-gui/0.5/dat.gui.min.js"></script>
  <style type="text/css">
circle {
  
}
    </style>

    <div class="container">
      <div class="row">
        <div class="col-md-6">
          <div id="fractal">
      
          </div>
          
        </div>
        <div class="col-md-6">
          <div id="fractalgui">
            <button id="regen" onclick="restart()">Regen</button>
          </div>
        </div>
      </div>
    </div>


    <script type="text/javascript">

var width = window.innerWidth /2;
var    height = width;
var    nodes = [];
var    x = 0;
var    y = 0;    
var iterations = 1000;
var radius = 2;

var svg = d3.select("#fractal").append("svg")
    .attr("width", width)
    .attr("height", height);

var marginLeft = 10;
var marginTop = 10;
    
var anchorRadius = 4;    
 

restart();



function restart() {
  nodes[0] = {x: width-anchorRadius, y: height-anchorRadius, r:255, g:0, b:0, radius: anchorRadius};
  nodes[1] = {x: anchorRadius, y: height-anchorRadius, r:0, g:255, b:0, radius: anchorRadius};
  nodes[2] = {x: (width/2), y: anchorRadius, r:0, g:0, b:255, radius: anchorRadius};
  
  var r = 0;
  var g = 0;
  var b = 0;
  
  for (i = 3; i < iterations; i++) {
    switch(Math.floor(Math.random()*3)) {
    case 0:
      x = x/2;
      y = (height+y)/2;
      r = 0;
      g = 255;
      b = 0;
      break
    case 1:
      x = (width+x)/2;
      y = (height+y)/2;
      r = 255;
      g = 0;
      b = 0;
      break
    case 2:
      x = (width/2+x)/2;
      y = y/2;
      r = 0;
      g = 0;
      b = 255;
      break
    }
    nodes[i] = {x: x, y:y, r:r, g:g, b:b, radius: radius}
  }
  nodes.length = iterations;

  node = svg.selectAll("circle")
  .data(nodes)

  node.enter().insert("circle")

  node.attr("cx", function(d) { return d.x})
  .attr("cy", function(d) { return d.y})
  .attr("r", function(d) { return d.radius})
  .style("fill", function(d) { return  "rgb(" + d.r + "," + d.g + "," + d.b + ")" })
  ;

  node.exit().remove()
}

    </script>
