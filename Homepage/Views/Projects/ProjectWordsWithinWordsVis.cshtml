
<div id="vis">

</div>


<script src="//d3js.org/d3.v3.min.js"></script>
<script>

    var width = 1920,
        height = 1080;

    var canvas = d3.select("#vis").append("canvas")
        .attr("width", width)
        .attr("height", height);

    var force = d3.layout.force()
        .size([width, height]);

    var nodeRadius = 4.5;

    d3.json("/Projects/Json1")
        .response(function (xhr) { return d3.csvParse(xhr.responseText); })
        .get(function(data) {
            console.log(data);
        });

    d3.json("graph.json", function (error, graph) {
        if (error) throw error;

        var context = canvas.node().getContext("2d");

        force
            .nodes(graph.nodes)
            .links(graph.links)
            .charge("-150")
            .linkStrength("10")
            .gravity("0.1")
            .on("tick", tick)
            .start();

        function tick() {
            context.clearRect(0, 0, width, height);

            // draw links
            context.strokeStyle = "#ccc";
            context.beginPath();
            graph.links.forEach(function (d) {
                context.moveTo(d.source.x, d.source.y);
                context.lineTo(d.target.x, d.target.y);
            });
            context.stroke();

            // draw nodes
            context.fillStyle = "steelblue";
            context.beginPath();
            graph.nodes.forEach(function (d) {
                context.moveTo(d.x, d.y);
                context.arc(d.x, d.y, nodeRadius, 0, 2 * Math.PI);
                context.font = "12px Arial";
                context.fillText(d.name, d.x + nodeRadius, d.y);
            });
            context.fill();
        }
    });

</script>
